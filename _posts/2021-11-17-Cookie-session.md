---
title: "cookie, session, token 🍪 "
permalink: /cs/CookieSession
tags:
  - [CS]

navigation: true
toc: true
toc_sticky: true

date: 2021-11-18
last_modified_at: 2021-11-18
---

![]()

# cookie 

서버는 쿠키를 이용 브라우저에 `내 정보를 기억`하기 위한 데이터를 넣을 수 있다.

<img src="/assets/images/Cookie_what_is_cookie.jpeg" /><br/>

1. 사이트에 방문하면 브라우저는 서버에 request를 보냄
2. 서버는 모든 데이터와 내가 찾던 페이지 정보를 가지고 response함<br/>
(이 response 안에 브라우저가 저장하고자 하는 쿠키가 있다)

쿠키는?

- 쿠키는 `도메인에 따라 제한`된다
  - 유튜브가 준 쿠키는 유튜브에만 전달됨
- 쿠키는 `유효기간`이 있다
  - 서버기 정한 기간마다 다름
- 쿠키는 인증 뿐만 아니라 `여러가지 정보를 저장`할 수 있다
  - 웹사이트 언어설정 변경으로 예시<br/><br/>
<img src="/assets/images/Cookie_cookie.jpeg" /><br/>

<br/>

# session

> HTTP 프로토콜은 `stateless`!

- 서버로 가는 모든 요청이, 이전 request와는 독립적으로 다뤄진다
- 요청끼리 연결이 없음. 메모리가 없음.

요청이 끝나면 서버는 잊어버리기 때문에, 요청시마다 우리가 누군지 알려줘야한다

알려주는 방법 중 하나가 바로 session!

> login 예제

- Nico라는 유저가 로그인을 하고싶다면,

1. 유저명과 비밀번호를 서버에 보낸다
2. 비번이 맞다면 서버는 세션DB에 Nico라는 유저를 생성함(해당 세션에는 별도의 ID 존재)
3. 해당 세션ID는 쿠키를 통해 서버를 거쳐 브라우저로 돌아오고 저장된다

따라서, 같은 웹사이트의 다른 페이지로 이동하면?

- 브라우저가 `세션ID`를 가지고있는 쿠키를 서버에 보낸다
- 서버는 `세션ID`와 함께 오는 쿠키를 확인한다
  - 서버는 아직까지도 내가 누구인지 모름
  - `세션ID`가 있는 쿠키를 가진 요청이 있다는 것만 알고있다!
- 서버는 해당 `세션ID`를 가지고 **세션 DB**를 확인하고
- **세션DB**는 이 `세션ID`가 유저명 Nico의 것이라는 걸 알려줌
- 서버는 이제야 누구인지 알고, 환영Nico 메시지를 띄운다

> => 해당 요청이 끝나고 다른 페이지로 이동하면 이 프로세스를 반복함

**유저는 오직 `세션ID`만** 가지고 있다!<br/>
**서버가 유저에 대한 모든 정보**를 가지고 있음

쿠키는 이 `세션ID`를 전달하기 위한 `매개체`일 뿐!

세션을 이용해 android, ios 앱을 만들 수 있지만<br/>
**쿠키는 native 앱에 없기 때문에** 사용할 수 없다. 쿠키는 오직 브라우저에만 있음

=> 세션ID를 전달해주는 매개체로 쿠키 대신 <strong>**토큰**<strong>을 사용!


# token